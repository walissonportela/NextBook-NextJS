{"version":3,"sources":["../../../../../src/modules/product/commands/handlers/delete-product.handler.ts"],"sourcesContent":["import { ICommandHandler, CommandHandler } from \"@nestjs/cqrs\";\nimport { DeleteProductCommand } from \"../impl/delete-product.command\";\nimport { PrismaService } from \"src/core/infra/database/prisma.service\";\nimport { NotFoundException } from \"@nestjs/common\";\n\n@CommandHandler(DeleteProductCommand)\nexport class DeleteProductHandler implements ICommandHandler<DeleteProductCommand> {\n    constructor(private readonly prismaService: PrismaService) {}\n\n    async execute(command: DeleteProductCommand) {\n        const { id } = command.data;\n\n        try {\n            const product = await this.prismaService.product.delete({\n                where: { id }\n            });\n            return { message: 'Product deleted successfully', product };\n        } catch (error) {\n            throw new NotFoundException(`Product with ID ${id} not found`);\n        }\n    }\n}\n"],"names":["DeleteProductHandler","execute","command","id","data","product","prismaService","delete","where","message","error","NotFoundException"],"mappings":";;;;+BAMaA;;;eAAAA;;;sBANmC;sCACX;+BACP;wBACI;;;;;;;;;;AAG3B,IAAA,AAAMA,uBAAN,MAAMA;IAGT,MAAMC,QAAQC,OAA6B,EAAE;QACzC,MAAM,EAAEC,EAAE,EAAE,GAAGD,QAAQE,IAAI;QAE3B,IAAI;YACA,MAAMC,UAAU,MAAM,IAAI,CAACC,aAAa,CAACD,OAAO,CAACE,MAAM,CAAC;gBACpDC,OAAO;oBAAEL;gBAAG;YAChB;YACA,OAAO;gBAAEM,SAAS;gBAAgCJ;YAAQ;QAC9D,EAAE,OAAOK,OAAO;YACZ,MAAM,IAAIC,yBAAiB,CAAC,CAAC,gBAAgB,EAAER,GAAG,UAAU,CAAC;QACjE;IACJ;IAbA,YAAY,AAAiBG,aAA4B,CAAE;aAA9BA,gBAAAA;IAA+B;AAchE"}